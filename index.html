<html>
<head>
<title>ajax測試</title>
</head>
<body>
<div id="product"></div>
<script>
let productDiv = document.getElementById("product");
productDiv.innerHTML = '... loading ...';
fetch('https://troyluuu.github.io/test/data/product.json')
  .then(function(response) {
    return response.text()
  }).then(function(text) {
	 
      var json = JSON.parse(text);
      productDiv.innerHTML = '';
      let sum = 0;
      for(var key in json){
      productDiv.innerHTML += json[key].name+'  '+json[key].price+'<hr>';
      sum += json[key].price;
}
      let productDiv = document.getElementById("product");
      let averPrice = sum % json.length();
      productDiv.innerHTML += '平均售價:'+averPrice;
  }).catch(function(err) {
      // Error :(
      productDiv.innerHTML = '發生錯誤:(';
  })
</script>
</body>
</html>
